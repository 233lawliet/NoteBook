 
## 1.1概述 ##
### 开发爬虫的语言 ###
- php
    - 对多线程，多进程支持度不够。
- java
    - 代码略显臃肿，重构成本大。
- c,c++
- python
    - 语法简单，支持模块多，框架支持

### 通用爬虫 ###

- 举例
    - baidu，360，biying，google
- 流程
    - 抓取网页
    - 采集数据
    - 数据处理
    - 提供显示
- 如何爬取新网站
    - 主动向百度提交url
    - 设置友情链接
    - 和dns服务商合作

- 检索排名
    - 竞价排名
    - 根据pagerank值：访问量等 （搜索引擎优化（英语：search engine optimization，缩写为SEO），是一种透过了解搜索引擎的运作规则来调整网站，以及提高目的网站在有关搜索引擎内排名的方式。）



### 聚焦爬虫 ###

- 根据特定的需求爬取指定的数据。
- 思路
    - 代替浏览器上网

- 流程
    - 给出指定的url
    - 写程序，模拟浏览器访问指定的url
    - 解析内容，提取数据




### robots协议 ###
- 概念
    - Robots协议（也称为爬虫协议、机器人协议等）的全称是“网络爬虫排除标准”（Robots Exclusion Protocol），网站通过Robots协议告诉搜索引擎哪些页面可以抓取，哪些页面不能抓取。
- 仅仅是口头上的协议
- 查看方式  域名/robots.txt




## 1.2http协议 ##



### http和https区别 ###

- https协议需要到ca申请证书，一般免费证书很少，需要交费。
- http是超文本传输协议，信息是明文传输，https 则是具有安全性的ssl加密传输协议。
- http和https使用的是完全不同的连接方式用的端口也不一样,前者是80,后者是443。
- http的连接很简单,是无状态的。
- HTTPS协议是由SSL+HTTP协议构建的可进行加密传输、身份认证的网络协议 要比http协议安全。



### https交互流程 ###

1. 客户端返送https请求，简历ssl链接
2. 服务器返回给客户端数字证书，其中包括了公钥
3. 验证服务器
    1. 客户端发送随机字符串
    2. 服务器私钥加密
    3. 服务器发送加密的字符串
    4. 客户端使用公钥解密，验证

4. 验证成功，公钥加密信息，发送给服务器
5. 服务器使用私钥解密

### http协议详解 ###
        
        博客：
        https://www.cnblogs.com/wqhwe/p/5407468.html
        https://www.cnblogs.com/10158wsj/p/6762848.html
书籍：《http协议》






### http工作流程 ###

1. 建立TCP连接
    - 在HTTP工作开始之前，Web浏览器首先要通过网络与Web服务器建立连接，该连接是通过TCP来完成的，该协议与IP协议共同构建Internet，即著名的TCP/IP协议族，因此Internet又被称作是TCP/IP网络。HTTP是比TCP更高层次的应用层协议，根据规则，只有低层协议建立之后才能进行更高层协议的连接，因此，首先要建立TCP连接，一般TCP连接的端口号是80。

2. Web浏览器向Web服务器发送请求命令 
    - 一旦建立了TCP连接，Web浏览器就会向Web服务器发送请求命令。例如：GET/sample/hello.jsp HTTP/1.1。

3. Web浏览器发送请求头信息 
    - 浏览器发送其请求命令之后，还要以头信息的形式向Web服务器发送一些别的信息，之后浏览器发送了一空白行来通知服务器，它已经结束了该头信息的发送。

4. Web服务器应答 
    - 客户机向服务器发出请求后，服务器会客户机回送应答， HTTP/1.1 200 OK ，应答的第一部分是协议的版本号和应答状态码。

5. Web服务器发送应答头信息 
    - 正如客户端会随同请求发送关于自身的信息一样，服务器也会随同应答向用户发送关于它自己的数据及被请求的文档。

6. Web服务器向浏览器发送数据 
    - Web服务器向浏览器发送头信息后，它会发送一个空白行来表示头信息的发送到此为结束，接着，它就以Content-Type应答头信息所描述的格式发送用户所请求的实际数据。

7. Web服务器关闭TCP连接 
    - 一般情况下，一旦Web服务器向浏览器发送了请求数据，它就要关闭TCP连接，然后如果浏览器或者服务器在其头信息加入了这行代码：Connection:keep-alive

    - TCP连接在发送后将仍然保持打开状态，于是，浏览器可以继续通过相同的连接发送请求。保持连接节省了为每个请求建立新连接所需的时间，还节约了网络带宽。



### http请求头的内容 ###


- 客户端连上服务器后，向服务器请求某个web资源，称之为客户端向服务器发送了一个HTTP请求。

- 一个完整的HTTP请求包括如下内容：一个请求行、若干消息头、以及实体内容
范例：

　　![](https://images0.cnblogs.com/i/289233/201405/280013226503252.png)


### http请求行 ###


- 请求行中的GET称之为请求方式，请求方式有：POST、GET、HEAD、OPTIONS、DELETE、TRACE、PUT，常用的有： GET、 POST
- 用户如果没有设置，默认情况下浏览器向服务器发送的都是get请求，例如在浏览器直接输地址访问，点超链接访问等都是get，用户如想把请求方式改为post，可通过更改表单的提交方式实现。
- 不管POST或GET，都用于向服务器请求某个WEB资源，这两种方式的区别主要表现在数据传递上：如果请求方式为GET方式，则可以在请求的URL地址后以?的形式带上交给服务器的数据，多个数据之间以&进行分隔，例如：GET /mail/1.html?name=abc&password=xyz HTTP/1.1
- GET方式的特点：在URL地址后附带的参数是有限制的，其数据容量通常不能超过1K。
- 如果请求方式为POST方式，则可以在请求的实体内容中向服务器发送数据，Post方式的特点：传送的数据量无限制。





### get和post区别 ###




- url可见性：

        get，参数url可见；
        
        post，url参数不可见



- 数据传输上：

        get，通过拼接url进行传递参数；
        
        post，通过body体传输参数



- 缓存性：

        get请求是可以缓存的
        
        post请求不可以缓存



- 后退页面的反应

        get请求页面后退时，不产生影响
        
        post请求页面后退时，会重新提交请求



- 传输数据的大小

        get一般传输数据大小不超过2k-4k（根据浏览器不同，限制不一样，但相差不大）
        
        post请求传输数据的大小根据php.ini 配置文件设定，也可以无限大。



- 安全性

        这个也是最不好分析的，原则上post肯定要比get安全，毕竟传输参数时url不可见。
        但也挡不住部分人闲的没事在那抓包玩。安全性个人觉得是没多大区别的，防君子不防小人就是这个道理。对传递的参数进行加密，其实都一样。





### 常见的请求头 ###



- accept:浏览器通过这个头告诉服务器，它所支持的数据类型
- Accept-Charset: 浏览器通过这个头告诉服务器，它支持哪种字符集
- Accept-Encoding：浏览器通过这个头告诉服务器，支持的压缩格式
- Accept-Language：浏览器通过这个头告诉服务器，它的语言环境
- Host：浏览器通过这个头告诉服务器，想访问哪台主机
- If-Modified-Since: 浏览器通过这个头告诉服务器，缓存数据的时间
- Referer：浏览器通过这个头告诉服务器，客户机是哪个页面来的  防盗链
- Connection：浏览器通过这个头告诉服务器，请求完后是断开链接还是何持链接
- X-Requested-With:XMLHttpRequest  达标通过ajax请求进行访问的



### http响应的头部信息 ###

- Location: 服务器通过这个头，来告诉浏览器跳到哪里
- Server：服务器通过这个头，告诉浏览器服务器的型号
- Content-Encoding：服务器通过这个头，告诉浏览器，数据的压缩格式
- Content-Length: 服务器通过这个头，告诉浏览器回送数据的长度
- Content-Language: 服务器通过这个头，告诉浏览器语言环境
- Content-Type：服务器通过这个头，告诉浏览器回送数据的类型
- Refresh：服务器通过这个头，告诉浏览器定时刷新
- Content-Disposition: 服务器通过这个头，告诉浏览器以下载方式打数据
- Transfer-Encoding：服务器通过这个头，告诉浏览器数据是以分块方式回送的
- Expires: -1  控制浏览器不要缓存
- Cache-Control: no-cache  
- Pragma: no-cache


















- 